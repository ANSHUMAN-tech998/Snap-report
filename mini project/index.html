<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snap & Report - Report Local Issues</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .slide-up {
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-md mx-auto px-4 py-3 flex items-center justify-between">
            <h1 class="text-xl font-bold text-blue-600">Snap&Report</h1>
            <div class="flex items-center space-x-4">
                <a href="login.html" class="text-sm font-medium text-blue-600 hover:underline">Login</a>
                <div class="flex items-center space-x-2 cursor-pointer" onclick="showProfile()">
                    <img id="headerProfilePic" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Ccircle cx='16' cy='16' r='16' fill='%234F46E5'/%3E%3Ctext x='16' y='21' text-anchor='middle' fill='white' font-size='14' font-weight='bold'%3EJD%3C/text%3E%3C/svg%3E" alt="Profile" class="w-8 h-8 rounded-full">
                    <span id="headerUsername" class="text-sm font-medium text-gray-700">Jay Dubey</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-md mx-auto pb-20">
        <!-- Home Page -->
        <div id="homePage" class="page">
            <div class="p-4 space-y-4">
                <!-- Issue Posts -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 fade-in">
                    <div class="p-4 flex items-center space-x-3">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%23EF4444'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='white' font-size='16' font-weight='bold'%3ESM%3C/text%3E%3C/svg%3E" alt="User" class="w-10 h-10 rounded-full">
                        <div>
                            <h3 class="font-semibold text-gray-900">Rohan Mehta</h3>
                            <p class="text-xs text-gray-500">2 hours ago</p>
                        </div>
                    </div>
                    <div class="px-4 pb-2">
                        <p class="text-gray-800 mb-3">Overflowing and uncovered gutters are turning into open drains, posing serious health and environmental hazards</p>
                        <p class="text-black-100 mb-3 text-xs">Location : Near KJ Somaiya College</p>
                        <div class="bg-gray-100 rounded-lg p-3 mb-3">
                            <div class="gutter">
                                <img src="images/gutter.jpeg" alt="Overflowing gutter" class="w-full h-auto rounded">
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <button onclick="toggleLike(this)" class="flex items-center space-x-2 text-gray-600 hover:text-blue-500 transition-colors">
                                <span class="like-icon">üëç</span>
                                <span class="like-count">12</span>
                            </button>
                            <span class="text-xs text-gray-500">Status: Reported</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm border border-gray-200 fade-in">
                    <div class="p-4 flex items-center space-x-3">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%2310B981'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='white' font-size='16' font-weight='bold'%3EMJ%3C/text%3E%3C/svg%3E" alt="User" class="w-10 h-10 rounded-full">
                        <div>
                            <h3 class="font-semibold text-gray-900">Ankit Gupta</h3>
                            <p class="text-xs text-gray-500">5 hours ago</p>
                        </div>
                    </div>
                    <div class="px-4 pb-2">
                        <p class="text-gray-800 mb-3">Overflowing garbage bin attracting pests. Needs urgent cleanup! üóëÔ∏è</p>
                        <p class="text-black-100 mb-3 text-xs">Location : Near Chunabhatti Station</p>
                        <div class="bg-gray-100 rounded-lg p-3 mb-3">
                            <div class="bin">
                                <img src="images/bin.jpeg" alt="Overflowing garbage bin" class="w-full h-auto rounded">
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <button onclick="toggleLike(this)" class="flex items-center space-x-2 text-gray-600 hover:text-blue-500 transition-colors">
                                <span class="like-icon">üëç</span>
                                <span class="like-count">8</span>
                            </button>
                            <span class="text-xs text-gray-500">Status: In Progress</span>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm border border-gray-200 fade-in">
                    <div class="p-4 flex items-center space-x-3">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%23F59E0B'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='white' font-size='16' font-weight='bold'%3ELW%3C/text%3E%3C/svg%3E" alt="User" class="w-10 h-10 rounded-full">
                        <div>
                            <h3 class="font-semibold text-gray-900">Simran Singh</h3>
                            <p class="text-xs text-gray-500">1 day ago</p>
                        </div>
                    </div>
                    <div class="px-4 pb-2">
                        <p class="text-gray-800 mb-3">Carefull on New Link Road its pitch Dark</p>
                        <p class="text-black-100 mb-3 text-xs">Location : Mumbai</p>
                        <div class="bg-gray-100 rounded-lg p-3 mb-3">
                            <div class="light">
                                <img src="images/light.jpeg" alt="Dark street with broken street light" class="w-full h-auto rounded">
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <button onclick="toggleLike(this)" class="flex items-center space-x-2 text-gray-600 hover:text-blue-500 transition-colors">
                                <span class="like-icon">üëç</span>
                                <span class="like-count">15</span>
                            </button>
                            <span class="text-xs text-green-600 font-medium">Status: Resolved</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profilePage" class="page hidden">
            <div class="p-6">
                <div class="text-center mb-6">
                    <img id="profilePic" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Ccircle cx='40' cy='40' r='40' fill='%234F46E5'/%3E%3Ctext x='40' y='50' text-anchor='middle' fill='white' font-size='28' font-weight='bold'%3EJD%3C/text%3E%3C/svg%3E" alt="Profile" class="w-20 h-20 rounded-full mx-auto mb-4 cursor-pointer" onclick="changeProfilePic()">
                    <h2 id="profileUsername" class="text-xl font-bold text-gray-900 mb-2">Jay Dubey</h2>
                    <button onclick="editUsername()" class="text-blue-600 text-sm hover:underline">Edit Username</button>
                </div>

                <div class="space-y-4">
                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
                        <div class="flex items-center justify-between">
                            <span class="font-medium text-gray-900">Notifications</span>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="notificationToggle" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                    </div>

                    <button onclick="showHistory()" class="w-full bg-white rounded-lg p-4 shadow-sm border border-gray-200 text-left hover:bg-gray-50 transition-colors">
                        <div class="flex items-center justify-between">
                            <span class="font-medium text-gray-900">My Report History</span>
                            <span class="text-gray-400">‚Üí</span>
                        </div>
                    </button>

                    <button onclick="showHome()" class="w-full bg-blue-600 text-white rounded-lg p-4 font-medium hover:bg-blue-700 transition-colors">
                        Back to Home
                    </button>
                </div>
            </div>
        </div>

        <!-- History Page -->
        <div id="historyPage" class="page hidden">
            <div class="p-4">
                <div class="flex items-center mb-6">
                    <button onclick="showProfile()" class="text-blue-600 mr-3">‚Üê Back</button>
                    <h2 class="text-lg font-bold text-gray-900">My Reports</h2>
                </div>

                <div class="space-y-4">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-semibold text-gray-900">Broken Traffic Light</h3>
                            <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">In Progress</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-2">Reported 3 days ago at Mira Road</p>
                        <p class="text-sm text-gray-800">Traffic light not working properly, causing confusion.</p>
                    </div>

                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-semibold text-gray-900">Pothole</h3>
                            <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">Resolved</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-2">Reported 1 week ago at Sion Station</p>
                        <p class="text-sm text-gray-800">Roads has many pothole make difficulty in travelling</p>
                    </div>

                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-semibold text-gray-900">Garbage</h3>
                            <span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded-full">Reported</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-2">Reported 2 weeks ago at Kurla</p>
                        <p class="text-sm text-gray-800">Need to clean semll very bad and may cause health issue</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Report Page -->
        <div id="reportPage" class="page hidden">
            <div class="p-4">
                <h2 class="text-lg font-bold text-gray-900 mb-6">Report an Issue</h2>
                
                <form onsubmit="submitReport(event)" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Issue Title</label>
                        <input type="text" id="issueTitle" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Brief description of the issue" required>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                        <select id="issueCategory" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                            <option value="">Select category</option>
                            <option value="roads">Roads & Traffic</option>
                            <option value="lighting">Street Lighting</option>
                            <option value="waste">Waste Management</option>
                            <option value="parks">Parks & Recreation</option>
                            <option value="utilities">Utilities</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="issueDescription" required rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Provide detailed description of the issue"></textarea>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                        <div class="space-y-2">
                            <input type="text" id="locationAddress" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter address or location" required>
                            <button type="button" onclick="getCurrentLocation()" class="w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2">
                                <span>üìç</span>
                                <span>Use Current Location</span>
                            </button>
                            <div id="locationStatus" class="text-sm text-gray-600 hidden"></div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Photo</label>
                        <input type="file" id="issuePhoto" accept="image/*" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>

                    <button type="submit" class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors">
                        Submit Report
                    </button>
                </form>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50">
        <div class="max-w-md mx-auto px-4 py-2">
            <div class="flex justify-around">
                <button onclick="showHome()" id="homeBtn" class="flex flex-col items-center py-2 px-4 text-blue-600">
                    <span class="text-xl mb-1">üè†</span>
                    <span class="text-xs font-medium">Home</span>
                </button>
                <button onclick="showReport()" id="reportBtn" class="flex flex-col items-center py-2 px-4 text-gray-600">
                    <span class="text-xl mb-1">üìù</span>
                    <span class="text-xs font-medium">Report</span>
                </button>
                <a href="login.html" id="loginNav" class="flex flex-col items-center py-2 px-4 text-gray-600">
                    <span class="text-xl mb-1">üîê</span>
                    <span class="text-xs font-medium">Login</span>
                </a>
            </div>
        </div>
    </nav>

    <script>
        // User data
        let userData = {
            username: 'Jay Dubey',
            profilePic: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Ccircle cx='40' cy='40' r='40' fill='%234F46E5'/%3E%3Ctext x='40' y='50' text-anchor='middle' fill='white' font-size='28' font-weight='bold'%3EJD%3C/text%3E%3C/svg%3E",
            notifications: true,
            reports: [
                {
                    id: 1,
                    title: 'Broken Traffic Light',
                    category: 'roads',
                    description: 'Traffic light not working properly, causing confusion.',
                    location: 'Miar Road',
                    date: '3 days ago',
                    status: 'In Progress'
                },
                {
                    id: 2,
                    title: 'Pothole',
                    category: 'road',
                    description: 'Roads has many potholes make difficulty in travelling',
                    location: 'Sion',
                    date: '1 week ago',
                    status: 'Resolved'
                },
                {
                    id: 3,
                    title: 'Garbage',
                    category: 'garbage',
                    description: 'Need to clean semll very bad and may cause health issue',
                    location: 'Kurla',
                    date: '2 weeks ago',
                    status: 'Reported'
                }
            ]
        };

        // Navigation functions
        function showHome() {
            hideAllPages();
            document.getElementById('homePage').classList.remove('hidden');
            updateNavButtons('home');
        }

        function showProfile() {
            hideAllPages();
            document.getElementById('profilePage').classList.remove('hidden');
            updateNavButtons('');
        }

        function showHistory() {
            hideAllPages();
            document.getElementById('historyPage').classList.remove('hidden');
            renderHistory();
        }

        function renderHistory() {
            const historyContainer = document.querySelector('#historyPage .space-y-4');
            historyContainer.innerHTML = '';
            
            userData.reports.forEach(report => {
                const statusClass = report.status === 'Resolved' ? 'bg-green-100 text-green-800' :
                                  report.status === 'In Progress' ? 'bg-yellow-100 text-yellow-800' :
                                  'bg-gray-100 text-gray-800';
                
                const reportElement = document.createElement('div');
                reportElement.className = 'bg-white rounded-lg shadow-sm border border-gray-200 p-4';
                reportElement.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="font-semibold text-gray-900">${report.title}</h3>
                        <span class="text-xs ${statusClass} px-2 py-1 rounded-full">${report.status}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">Reported ${report.date} at ${report.location}</p>
                    <p class="text-sm text-gray-800">${report.description}</p>
                `;
                historyContainer.appendChild(reportElement);
            });
        }

        function showReport() {
            hideAllPages();
            document.getElementById('reportPage').classList.remove('hidden');
            updateNavButtons('report');
        }

        function hideAllPages() {
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.add('hidden'));
        }

        function updateNavButtons(active) {
            document.getElementById('homeBtn').className = active === 'home' 
                ? 'flex flex-col items-center py-2 px-4 text-blue-600'
                : 'flex flex-col items-center py-2 px-4 text-gray-600';
            
            document.getElementById('reportBtn').className = active === 'report'
                ? 'flex flex-col items-center py-2 px-4 text-blue-600'
                : 'flex flex-col items-center py-2 px-4 text-gray-600';
        }

        // Profile functions
        function editUsername() {
            const newUsername = prompt('Enter new username:', userData.username);
            if (newUsername && newUsername.trim()) {
                userData.username = newUsername.trim();
                updateUserDisplay();
            }
        }

        function changeProfilePic() {
            const colors = ['#4F46E5', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6', '#EC4899'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            const initials = userData.username.split(' ').map(n => n[0]).join('').toUpperCase();
            
            userData.profilePic = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Ccircle cx='40' cy='40' r='40' fill='${randomColor.replace('#', '%23')}'/%3E%3Ctext x='40' y='50' text-anchor='middle' fill='white' font-size='28' font-weight='bold'%3E${initials}%3C/text%3E%3C/svg%3E`;
            updateUserDisplay();
        }

        function updateUserDisplay() {
            document.getElementById('headerUsername').textContent = userData.username;
            document.getElementById('profileUsername').textContent = userData.username;
            document.getElementById('profilePic').src = userData.profilePic;
            
            // Update header profile pic
            const initials = userData.username.split(' ').map(n => n[0]).join('').toUpperCase();
            const headerPic = userData.profilePic.replace('80', '32').replace('28', '14').replace('50', '21');
            document.getElementById('headerProfilePic').src = headerPic;
        }

        // Thumbs up functionality
        function toggleLike(button) {
            const likeIcon = button.querySelector('.like-icon');
            const likeCount = button.querySelector('.like-count');
            const currentCount = parseInt(likeCount.textContent);
            
            if (likeIcon.textContent === 'üëç') {
                likeIcon.textContent = 'üëé';
                likeCount.textContent = currentCount - 1;
                button.classList.remove('text-blue-500');
                button.classList.add('text-gray-600');
            } else {
                likeIcon.textContent = 'üëç';
                likeCount.textContent = currentCount + 1;
                button.classList.add('text-blue-500');
                button.classList.remove('text-gray-600');
            }
        }

        // Location functionality
        function getCurrentLocation() {
            const statusDiv = document.getElementById('locationStatus');
            statusDiv.classList.remove('hidden');
            statusDiv.textContent = 'Getting your location...';
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const lat = position.coords.latitude.toFixed(6);
                        const lng = position.coords.longitude.toFixed(6);
                        document.getElementById('locationAddress').value = `Current Location (${lat}, ${lng})`;
                        statusDiv.textContent = '‚úÖ Location captured successfully!';
                        statusDiv.className = 'text-sm text-green-600';
                    },
                    function(error) {
                        statusDiv.textContent = '‚ùå Unable to get location. Please enter manually.';
                        statusDiv.className = 'text-sm text-red-600';
                    }
                );
            } else {
                statusDiv.textContent = '‚ùå Geolocation not supported. Please enter manually.';
                statusDiv.className = 'text-sm text-red-600';
            }
        }

        // Report submission
        function submitReport(event) {
            event.preventDefault();
            
            const title = document.getElementById('issueTitle').value;
            const category = document.getElementById('issueCategory').value;
            const description = document.getElementById('issueDescription').value;
            const location = document.getElementById('locationAddress').value || 'Location not specified';
            
            if (!title || !description) {
                alert('Please fill in all required fields.');
                return;
            }
            
            // Add new report to user's history
            const newReport = {
                id: userData.reports.length + 1,
                title: title,
                category: category,
                description: description,
                location: location,
                date: 'Just now',
                status: 'Reported'
            };
            
            userData.reports.unshift(newReport); // Add to beginning of array
            
            // Simulate report submission
            alert('Report submitted successfully! Thank you for helping improve our community.');
            
            // Reset form
            document.getElementById('issueTitle').value = '';
            document.getElementById('issueCategory').value = '';
            document.getElementById('issueDescription').value = '';
            document.getElementById('locationAddress').value = '';
            document.getElementById('issuePhoto').value = '';
            document.getElementById('locationStatus').classList.add('hidden');
            
            // Go back to home
            showHome();
        }

        // Initialize app
        updateUserDisplay();
        showHome();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9831ac7c462589e1',t:'MTc1ODU0Mjc2MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
